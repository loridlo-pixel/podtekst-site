<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PODТЕКСТ — Official</title>

<style>
:root{
  --bg:#0f0f0f;
  --bg2:#161616;
  --text:#eaeaea;
  --muted:#9a9a9a;
}
*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,system-ui,Arial;
  background:var(--bg);
  color:var(--text);
  padding-bottom:96px;
}

/* HEADER */
header{
  position:sticky;
  top:0;
  height:80px;
  z-index:20;
  background:rgba(15,15,15,.9);
  backdrop-filter:blur(12px);
}
.nav{
  max-width:1200px;
  margin:auto;
  height:80px;
  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;
  padding:0 16px;
}
.nav img{height:80px;transform:scale(2.5)}
.nav-menu{justify-self:end;display:flex;gap:20px}
.nav-menu a{color:#eaeaea;text-decoration:none;opacity:.8}
.nav-menu a:hover{opacity:1}

/* BURGER */
.burger{
  display:none;
  flex-direction:column;
  gap:5px;
  width:26px;
  cursor:pointer;
  justify-self:end;
}
.burger span{
  height:3px;
  background:#fff;
  border-radius:2px;
  transition:.3s;
}
.burger.active span:nth-child(1){
  transform:rotate(45deg) translate(5px,5px);
}
.burger.active span:nth-child(2){
  opacity:0;
}
.burger.active span:nth-child(3){
  transform:rotate(-45deg) translate(6px,-6px);
}

@media(max-width:768px){
  .nav{grid-template-columns:auto 1fr auto}
  .nav-menu{
    position:fixed;
    top:80px;
    right:-100%;
    width:240px;
    height:100vh;
    background:#0f0f0f;
    flex-direction:column;
    padding:20px;
    transition:.3s;
  }
  .nav-menu.active{right:0}
  .burger{display:flex}
}

/* HERO */
.hero{height:100vh;background:#111}

/* SECTIONS */
section{max-width:1200px;margin:64px auto;padding:0 16px}

/* ABOUT */
.about-text{color:#ddd;line-height:1.6;font-size:15px}

/* NEW RELEASE */
.new-release{display:flex;justify-content:center}
.new-player{
  display:flex;
  align-items:center;
  gap:20px;
  background:#1c1c1c;
  border-radius:16px;
  padding:20px;
  max-width:900px;
  width:100%;
}
  .icon-btn{
  display:flex;
  align-items:center;
  justify-content:center;
  background:none;
  border:none;
  cursor:pointer;
}

.icon-btn svg{
  fill:#fff;
  transition: transform .2s, opacity .2s;
}

.icon-btn:hover svg{
  transform:scale(1.1);
  opacity:.8;
}

.new-cover{
  width:120px;
  height:120px;
  border-radius:12px;
  object-fit:cover;
}
.new-info{flex:1}
.new-title{font-size:18px;font-weight:600}
.new-artist{font-size:14px;color:#aaa}
.new-controls{display:flex;gap:10px}
.new-controls button,
.new-controls a{
  background:#2a2a2a;
  border:none;
  color:#fff;
  width:40px;
  height:40px;
  border-radius:50%;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
}
.new-controls button:hover,
.new-controls a:hover{background:#444}

/* ALBUMS */
.albums{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:20px
}
.album-card{text-align:center;opacity:.6;cursor:pointer}
.album-card.active{opacity:1}
.album-card img{
  width:100%;
  aspect-ratio:1/1;
  border-radius:12px;
  object-fit:cover
}

/* TRACKS */
.tracks{
  background:var(--bg2);
  border-radius:16px;
  overflow:hidden;
  margin-top:24px
}
.track{
  padding:16px;
  border-bottom:1px solid #222;
}
.track.active{background:#1b1b1b}
.track-header{
  display:grid;
  grid-template-columns:48px 1fr auto auto;
  gap:12px;
  align-items:center
}
.track-cover{
  width:48px;
  height:48px;
  border-radius:6px;
  object-fit:cover
}
.track-play{cursor:pointer}
.track-download{color:#fff;text-decoration:none;opacity:.5}
.track-download:hover{opacity:1}

/* GLOBAL PLAYER */
.global-player{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  background:#1a1a1a;
  border-top:1px solid #222;
  display:flex;
  align-items:center;
  gap:16px;
  padding:12px 16px;
  z-index:50;
}
.global-cover{
  width:56px;
  height:56px;
  border-radius:8px;
  object-fit:cover;
}
.global-info{flex:1}
.global-title{font-size:14px}
.global-controls{display:flex;gap:12px}
.global-controls button{
  background:none;
  border:none;
  color:#fff;
  font-size:18px;
  cursor:pointer;
}
.global-progress{
  position:absolute;
  top:-3px;
  left:0;
  height:3px;
  width:100%;
  background:#333;
}
.global-bar{
  height:100%;
  width:0%;
  background:#fff;
}
</style>
</head>

<body>

<header>
  <div class="nav">
    <div></div>
    <img src="logo.png">
    <nav class="nav-menu">
      <a href="#about">О группе</a>
      <a href="#tracks">Треки</a>
    </nav>
    <div class="burger"><span></span><span></span><span></span></div>
  </div>
</header>

<div class="hero"></div>

<section class="new-release">
  <div class="new-player">
    <img class="new-cover" id="newCover">
    <div class="new-info">
      <div class="new-title" id="newTitle">—</div>
      <div class="new-artist">PODТЕКСТ</div>
    </div>
    <div class="new-controls">
      <button data-action="prev">⏮</button>
      <button data-action="play">▶</button>
      <button data-action="next">⏭</button>
      <a id="downloadBtn" download>⬇</a>
    </div>
  </div>
</section>

<section id="about">
  <h2>О группе</h2>
  <div class="about-text">
   <p>PODТЕКСТ — музыкальный проект с широким жанровым диапазоном и акцентом на смысл.</p> <p>Проект работает на стыке лирической поп-музыки, рока, шансона, рэпа и других направлений, объединяя разные стили единым авторским подходом. В основе каждого трека — текст с глубиной, вторым планом и подтекстом, который раскрывается при внимательном прослушивании.</p> <p>Автор слов и музыки — разносторонний артист, свободно работающий с формой, настроением и жанром. Лирика варьируется от личных и эмоциональных историй до социальных и философских тем. Музыка всегда подчинена смыслу, а не шаблону.</p> <p>PODТЕКСТ ориентирован на слушателя, которому важны не только мелодия и подача, но и содержание. Проект органично чувствует себя как в камерных композициях, так и в энергичных треках, сохраняя узнаваемый стиль.</p> <p>PODТЕКСТ — это музыка, в которой между строк всегда есть больше, чем кажется на первый взгляд.</p>
  </div>
</section>

<section id="tracks"> <h2>Треки и альбомы</h2> <div class="albums"> <div class="album-card active" data-album="all"> <img src="cover/album-all.jpg"> <div class="album-title">Все треки</div> </div> <div class="album-card" data-album="album1"> <img src="cover/album-main.jpg"> <div class="album-title">Две сестры</div> </div> <div class="album-card" data-album="album2"> <img src="cover/album-main2.jpg"> <div class="album-title">Город северных вьюг</div> </div> <div class="album-card" data-album="album3"> <img src="cover/album-main3.jpg"> <div class="album-title">Авангард идёт вперёд</div> </div> </div> <div class="tracks" id="tracksList"></div> </section>

<div class="global-player">
  <div class="global-progress"><div class="global-bar" id="globalBar"></div></div>
  <img class="global-cover" id="globalCover">
  <div class="global-info">
    <div class="global-title" id="globalTitle">—</div>
  </div>
<div class="global-controls">
  <button id="prev" class="icon-btn">
    <svg width="20" height="20"><use xlink:href="#icon-prev"></use></svg>
  </button>

  <button id="play" class="icon-btn">
    <svg width="20" height="20"><use xlink:href="#icon-play"></use></svg>
  </button>

  <button id="next" class="icon-btn">
    <svg width="20" height="20"><use xlink:href="#icon-next"></use></svg>
  </button>
</div>

</div>

<script>
let tracks=[];
let currentIndex=0;
const audio=new Audio();

fetch('tracks.json').then(r=>r.json()).then(data=>{
  tracks=data;
  renderTracks();
  loadTrack(0);
});

function renderTracks(){
  const list=document.getElementById('tracksList');
  list.innerHTML='';
  tracks.forEach((t,i)=>{
    const el=document.createElement('div');
    el.className='track';
    el.innerHTML=`
      <div class="track-header">
        <img class="track-cover" src="${t.cover}">
        <div>${t.title}</div>
        <div class="track-play">▶</div>
        <a class="track-download" href="${t.file}" download>⬇</a>
      </div>
    `;
    el.querySelector('.track-play').onclick=()=>playTrack(i);
    list.appendChild(el);
  });
}

function loadTrack(i){
  const t=tracks[i];
  audio.src=t.file;
  globalCover.src=t.cover;
  globalTitle.textContent=t.title;
  newCover.src=t.cover;
  newTitle.textContent=t.title;
  downloadBtn.href=t.file;
}

// элементы
const playBtn = document.getElementById('play');
const nextBtn = document.getElementById('next');
const prevBtn = document.getElementById('prev');

const globalBar = document.getElementById('globalBar');

let currentIndex = 0;
const audio = new Audio();

// переключение иконок через спрайт
function setPlayIcon(){
  playBtn.innerHTML = `<svg width="20" height="20"><use xlink:href="#icon-play"></use></svg>`;
}

function setPauseIcon(){
  playBtn.innerHTML = `<svg width="20" height="20"><use xlink:href="#icon-pause"></use></svg>`;
}

// загрузка трека
function loadTrack(i){
  const t = tracks[i];
  currentIndex = i;
  audio.src = t.file;
  globalCover.src = t.cover;
  globalTitle.textContent = t.title;

  // синхронизируем "новинка"
  newCover.src = t.cover;
  newTitle.textContent = t.title;
  downloadBtn.href = t.file;
}

// воспроизведение трека
function playTrack(i){
  loadTrack(i);
  audio.play();
  setPauseIcon();
}

// кнопки
playBtn.onclick = () => {
  if(audio.paused){
    audio.play();
    setPauseIcon();
  } else {
    audio.pause();
    setPlayIcon();
  }
};

nextBtn.onclick = () => {
  const nextIndex = (currentIndex + 1) % tracks.length;
  playTrack(nextIndex);
};

prevBtn.onclick = () => {
  const prevIndex = (currentIndex - 1 + tracks.length) % tracks.length;
  playTrack(prevIndex);
};

// обновление прогресса
audio.ontimeupdate = () => {
  globalBar.style.width = (audio.currentTime / audio.duration * 100 || 0) + '%';
};

// авто-переключение на следующий трек после окончания
audio.onended = () => {
  const nextIndex = (currentIndex + 1) % tracks.length;
  playTrack(nextIndex);
};


/* NEW RELEASE CONTROLS */
document.querySelectorAll('.new-controls button').forEach(btn=>{
  btn.onclick=()=>{
    const a=btn.dataset.action;
    if(a==='play') playTrack(currentIndex);
    if(a==='next') next.onclick();
    if(a==='prev') prev.onclick();
  };
});

/* BURGER */
const burger=document.querySelector('.burger');
const menu=document.querySelector('.nav-menu');
burger.onclick=()=>{
  burger.classList.toggle('active');
  menu.classList.toggle('active');
};
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PODТЕКСТ — Official</title>

<script src="https://unpkg.com/wavesurfer.js@7"></script>

<style>
:root{
  --bg:#0f0f0f;
  --bg2:#161616;
  --text:#eaeaea;
  --muted:#9a9a9a;
  --accent:#ffffff;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,Arial;
  background:var(--bg);
  color:var(--text)
}

/* HEADER */
header{
  position:sticky;
  top:0;
  height:80px;
  z-index:20;
  background:rgba(15,15,15,.9);
  backdrop-filter:blur(12px)
}
.nav{
  max-width:1200px;
  margin:auto;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 16px
}
.nav img{height:60px}

/* HERO */
.hero{
  height:70vh;
  background:url("hero.jpg") center/cover no-repeat;
  display:flex;
  align-items:flex-end;
  padding:40px
}

/* CONTENT */
section{
  max-width:1200px;
  margin:64px auto;
  padding:0 16px
}

/* ALBUM FILTER */
.albums{
  display:flex;
  gap:12px;
  margin-bottom:20px
}
.album-btn{
  padding:8px 14px;
  border-radius:20px;
  background:#1a1a1a;
  cursor:pointer;
  font-size:13px
}
.album-btn.active{
  background:#fff;
  color:#000
}

/* TRACK LIST */
.tracks{
  background:var(--bg2);
  border-radius:16px;
  overflow:hidden
}
.track{
  padding:16px;
  border-bottom:1px solid #222
}
.track:last-child{border-bottom:none}

.track-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  cursor:pointer
}
.track-title{
  font-size:14px
}
.track-play{
  font-size:18px
}

.wave{
  height:36px;
  margin-top:8px;
  display:none
}
.track.active .wave{
  display:block
}

footer{
  padding:40px 16px;
  text-align:center;
  color:var(--muted)
}
</style>
</head>

<body>

<header>
  <div class="nav">
    <img src="logo.png" alt="PODТЕКСТ">
  </div>
</header>

<div class="hero"></div>

<section id="tracks">
  <h2>Треки</h2>

  <div class="albums">
    <div class="album-btn active" data-album="all">Все</div>
    <div class="album-btn" data-album="album1">Альбом 1</div>
    <div class="album-btn" data-album="album2">Альбом 2</div>
    <div class="album-btn" data-album="album3">Альбом 3</div>
  </div>

  <div class="tracks" id="tracksList"></div>
</section>

<footer>© PODТЕКСТ — 2026</footer>

<script>
let tracks=[]
let currentWS=null

fetch('tracks.json')
.then(r=>r.json())
.then(data=>{
  tracks=data
  render('all')
})

function render(album){
  const list=document.getElementById('tracksList')
  list.innerHTML=''

  tracks
  .filter(t=>album==='all'||t.album===album)
  .forEach((t)=>{
    const el=document.createElement('div')
    el.className='track'
    el.innerHTML=`
      <div class="track-header">
        <div class="track-title">${t.title}</div>
        <div class="track-play">▶</div>
      </div>
      <div class="wave"></div>
    `

    const playBtn=el.querySelector('.track-play')
    const waveEl=el.querySelector('.wave')

    const ws=WaveSurfer.create({
      container:waveEl,
      waveColor:'#444',
      progressColor:'#fff',
      height:36,
      barWidth:2,
      normalize:true
    })

    playBtn.onclick=()=>{
      if(currentWS && currentWS!==ws){
        currentWS.pause()
        document.querySelectorAll('.track')
          .forEach(t=>t.classList.remove('active'))
      }

      el.classList.add('active')
      ws.load(t.file)
      ws.play()
      playBtn.textContent='❚❚'
      currentWS=ws
    }

    ws.on('finish',()=>{
      playBtn.textContent='▶'
      el.classList.remove('active')
    })

    list.appendChild(el)
  })
}

document.querySelectorAll('.album-btn').forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll('.album-btn')
      .forEach(b=>b.classList.remove('active'))
    btn.classList.add('active')
    render(btn.dataset.album)
  }
})
</script>

</body>
</html>

